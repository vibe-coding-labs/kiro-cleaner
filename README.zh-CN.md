# Kiro Cleaner - Kiroå¯¹è¯æ•°æ®æ¸…ç†å·¥å…·

ç®€ä½“ä¸­æ–‡ | [English](README.md)

Kiro Cleaner æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºæ¸…ç†Kiro AIå¯¹è¯åº”ç”¨å†—ä½™æ•°æ®çš„å·¥å…·ã€‚å®ƒå¯ä»¥å¸®åŠ©ç”¨æˆ·å®‰å…¨åœ°æ¸…ç†å¯¹è¯å†å²ã€ç¼“å­˜æ–‡ä»¶ã€æ—¥å¿—æ–‡ä»¶ç­‰å†—ä½™æ•°æ®ï¼ŒåŒæ—¶æä¾›å®Œæ•´çš„å¤‡ä»½å’Œæ¢å¤åŠŸèƒ½ã€‚

ğŸŒ **å®˜æ–¹ç½‘ç«™**: [https://vibe-coding-labs.github.io/kiro-cleaner/](https://vibe-coding-labs.github.io/kiro-cleaner/)

## âœ¨ ç‰¹æ€§

- ğŸ” **æ™ºèƒ½æ‰«æ**: è‡ªåŠ¨å‘ç°Kiroæ•°æ®å­˜å‚¨ä½ç½®å¹¶åˆ†æå­˜å‚¨ä½¿ç”¨æƒ…å†µ
- ğŸ§¹ **å®‰å…¨æ¸…ç†**: åŸºäºè§„åˆ™çš„æ™ºèƒ½æ¸…ç†ï¼Œç¡®ä¿æ•°æ®å®‰å…¨
- ğŸ’¾ **è‡ªåŠ¨å¤‡ä»½**: æ¸…ç†å‰è‡ªåŠ¨åˆ›å»ºå¤‡ä»½ï¼Œæ”¯æŒå‹ç¼©å’Œå¢é‡å¤‡ä»½
- âš™ï¸ **çµæ´»é…ç½®**: æ”¯æŒè‡ªå®šä¹‰æ¸…ç†è§„åˆ™å’Œæ¸…ç†ç­–ç•¥
- ğŸ“Š **è¯¦ç»†æŠ¥å‘Š**: æä¾›æ¸…ç†å‰åå¯¹æ¯”å’Œç©ºé—´èŠ‚çœç»Ÿè®¡
- ğŸ”„ **å›æ»šæ”¯æŒ**: æ”¯æŒæ¸…ç†æ“ä½œå›æ»š
- ğŸ¨ **ç¾è§‚ç•Œé¢**: å½©è‰²è¾“å‡ºå’Œè¿›åº¦æ˜¾ç¤º
- ğŸš€ **è·¨å¹³å°**: æ”¯æŒmacOSã€Windowsã€Linux

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- Go 1.21+
- æ”¯æŒçš„æ“ä½œç³»ç»Ÿï¼šmacOS 10.15+, Windows 10+, Linux (kernel 4.0+)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ¼”ç¤º

ä»¥ä¸‹æ˜¯åœ¨ç»ˆç«¯ä¸­è¿è¡Œ `kiro-cleaner scan` å‘½ä»¤çš„æ¼”ç¤ºï¼š

![Kiro Cleaner Scan Demo](data/demo-scan-command-final.gif)

ä»¥ä¸‹æ˜¯åœ¨ç»ˆç«¯ä¸­è¿è¡Œ `kiro-cleaner clean` å‘½ä»¤çš„æ¼”ç¤ºï¼ˆ3å€é€Ÿï¼‰ï¼š

![Kiro Cleaner Clean Demo](data/demo-clean-command-3x.gif)

### å®‰è£…

#### ä»æºç æ„å»º

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/vibe-coding-labs/kiro-cleaner.git
cd kiro-cleaner

# æ„å»º
make build-local

# å®‰è£…åˆ°ç³»ç»Ÿï¼ˆå¯é€‰ï¼‰
sudo make install
```

#### ä½¿ç”¨é¢„ç¼–è¯‘ç‰ˆæœ¬

ä» [Releases](https://github.com/vibe-coding-labs/kiro-cleaner/releases) é¡µé¢ä¸‹è½½é€‚åˆæ‚¨æ“ä½œç³»ç»Ÿçš„é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶ã€‚

### ä½¿ç”¨æ–¹æ³•

#### åŸºæœ¬ä½¿ç”¨

```bash
# æ‰«æKiroæ•°æ®å­˜å‚¨
./kiro-cleaner scan

# é¢„è§ˆæ¸…ç†æ“ä½œ
./kiro-cleaner preview

# æ‰§è¡Œæ¸…ç†ï¼ˆé¢„è§ˆæ¨¡å¼ï¼‰
./kiro-cleaner clean --dry-run

# æ‰§è¡Œæ¸…ç†ï¼ˆå®é™…æ‰§è¡Œï¼‰
./kiro-cleaner clean --backup

# åˆ—å‡ºå¤‡ä»½
./kiro-cleaner backup list

# æ¢å¤å¤‡ä»½
./kiro-cleaner backup restore <backup-id>
```

#### å‘½ä»¤è¡Œé€‰é¡¹

```bash
./kiro-cleaner --help

å¯ç”¨å‘½ä»¤:
  scan         æ‰«æKiroæ•°æ®å­˜å‚¨
  preview      é¢„è§ˆæ¸…ç†æ“ä½œ
  clean        æ‰§è¡Œæ•°æ®æ¸…ç†
  backup       ç®¡ç†å¤‡ä»½
  config       ç®¡ç†é…ç½®

å…¨å±€é€‰é¡¹:
  --config, -c     é…ç½®æ–‡ä»¶è·¯å¾„
  --verbose, -v    è¯¦ç»†è¾“å‡º
  --output, -o     è¾“å‡ºæ ¼å¼ (table|json|csv)
  --config-dir     é…ç½®ç›®å½•è·¯å¾„
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
kiro-cleaner/
â”œâ”€â”€ cmd/kiro-cleaner/          # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ internal/                  # å†…éƒ¨æ¨¡å—
â”‚   â”œâ”€â”€ config/               # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ scanner/              # æ•°æ®æ‰«æ
â”‚   â”œâ”€â”€ cleaner/              # æ¸…ç†å¼•æ“
â”‚   â”œâ”€â”€ backup/               # å¤‡ä»½ç®¡ç†
â”‚   â”œâ”€â”€ database/             # æ•°æ®åº“æ“ä½œ
â”‚   â”œâ”€â”€ storage/              # å­˜å‚¨æ£€æµ‹
â”‚   â”œâ”€â”€ ui/                   # ç”¨æˆ·ç•Œé¢
â”‚   â””â”€â”€ utils/                # å·¥å…·å‡½æ•°
â”œâ”€â”€ pkg/types/                # å…¬å…±ç±»å‹å®šä¹‰
â”œâ”€â”€ assets/                   # é™æ€èµ„æº
â”œâ”€â”€ test/                     # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ Makefile                  # æ„å»ºè„šæœ¬
â”œâ”€â”€ go.mod                    # Goæ¨¡å—æ–‡ä»¶
â””â”€â”€ README.md                 # é¡¹ç›®æ–‡æ¡£
```

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ ¸å¿ƒæ¨¡å—

#### 1. Scanner (æ‰«æå™¨)
- è‡ªåŠ¨å‘ç°Kiroå­˜å‚¨è·¯å¾„
- æ‰«æå’Œåˆ†ææ–‡ä»¶ç±»å‹
- è®¡ç®—å­˜å‚¨ç»Ÿè®¡ä¿¡æ¯
- ç”Ÿæˆæ¸…ç†å»ºè®®

#### 2. Cleaner (æ¸…ç†å¼•æ“)
- è§„åˆ™å¼•æ“ï¼šåŸºäºæ¡ä»¶åŒ¹é…æ–‡ä»¶
- å®‰å…¨æ£€æŸ¥ï¼šç¡®ä¿æ¸…ç†æ“ä½œå®‰å…¨
- æ‰§è¡Œæ¸…ç†ï¼šå®é™…åˆ é™¤æˆ–ç§»åŠ¨æ–‡ä»¶
- è¿›åº¦è·Ÿè¸ªï¼šå®æ—¶æ˜¾ç¤ºæ¸…ç†è¿›åº¦

#### 3. Backup (å¤‡ä»½ç®¡ç†å™¨)
- è‡ªåŠ¨å¤‡ä»½ï¼šæ¸…ç†å‰åˆ›å»ºå¤‡ä»½
- å‹ç¼©å­˜å‚¨ï¼šèŠ‚çœå­˜å‚¨ç©ºé—´
- ç‰ˆæœ¬ç®¡ç†ï¼šæ”¯æŒå¤šç‰ˆæœ¬å¤‡ä»½
- å¿«é€Ÿæ¢å¤ï¼šä»å¤‡ä»½æ¢å¤æ•°æ®

#### 4. Database (æ•°æ®åº“æ“ä½œ)
- SQLiteè¿æ¥å’Œç®¡ç†
- å¯¹è¯è®°å½•æŸ¥è¯¢å’Œæ¸…ç†
- æ•°æ®å®Œæ•´æ€§æ£€æŸ¥
- æ•°æ®åº“ä¼˜åŒ–

### æ¸…ç†è§„åˆ™

å·¥å…·æ”¯æŒçµæ´»çš„æ¸…ç†è§„åˆ™é…ç½®ï¼š

```json
{
  "name": "temp_file_cleanup",
  "description": "æ¸…ç†ä¸´æ—¶æ–‡ä»¶",
  "priority": 1,
  "enabled": true,
  "conditions": [
    {
      "type": "file_type",
      "field": "file_type",
      "operator": "=",
      "value": "temp"
    }
  ],
  "actions": [
    {
      "type": "delete",
      "backup": false
    }
  ]
}
```

## âš™ï¸ é…ç½®

### é»˜è®¤é…ç½®

å·¥å…·ä½¿ç”¨é»˜è®¤é…ç½®è¿›è¡Œåˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶è‡ªå®šä¹‰ï¼š

```json
{
  "kiro_paths": {
    "auto_detect": true,
    "custom_paths": []
  },
  "cleanup_rules": [
    // æ¸…ç†è§„åˆ™é…ç½®
  ],
  "backup_config": {
    "enabled": true,
    "path": "~/.kiro-cleaner/backups",
    "max_backups": 5,
    "compressed": true
  },
  "safety_checks": {
    "min_disk_space": "100MB",
    "verify_database": true,
    "require_confirmation": true,
    "backup_before_delete": true
  },
  "ui": {
    "show_progress": true,
    "detailed_output": false,
    "color_output": true
  }
}
```

### è‡ªå®šä¹‰é…ç½®

```bash
# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ–‡ä»¶
./kiro-cleaner --config /path/to/config.json scan

# ç¼–è¾‘é…ç½®æ–‡ä»¶
./kiro-cleaner config edit
```

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
make test

# è¿è¡Œå•å…ƒæµ‹è¯•
go test ./test/unit/...

# è¿è¡Œé›†æˆæµ‹è¯•
go test ./test/integration/...

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
make test-coverage
```

### æµ‹è¯•æ•°æ®

æµ‹è¯•ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼ŒåŒ…æ‹¬ï¼š
- æ¨¡æ‹ŸKiroç›®å½•ç»“æ„
- æ¨¡æ‹Ÿæ•°æ®åº“æ–‡ä»¶
- æ¨¡æ‹Ÿå„ç§æ–‡ä»¶ç±»å‹

## ğŸ”§ å¼€å‘

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å®‰è£…å¼€å‘ä¾èµ–
make deps

# ä»£ç æ ¼å¼åŒ–
make fmt

# ä»£ç æ£€æŸ¥
make lint

# å¼€å‘æ¨¡å¼è¿è¡Œ
make dev
```

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ç›¸åº”çš„`internal/`æ¨¡å—ä¸­æ·»åŠ ä»£ç 
2. æ·»åŠ ç›¸åº”çš„å•å…ƒæµ‹è¯•
3. æ›´æ–°æ–‡æ¡£å’Œé…ç½®
4. è¿è¡Œæµ‹è¯•ç¡®ä¿åŠŸèƒ½æ­£å¸¸

## ğŸ“Š ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šåŸºæœ¬æ¸…ç†æµç¨‹

```bash
# 1. æ‰«ææ•°æ®å­˜å‚¨
$ ./kiro-cleaner scan
ğŸ” æ‰«æKiroæ•°æ®å­˜å‚¨...
ğŸ“Š æ•°æ®åº“æ–‡ä»¶: /Users/user/Library/Application Support/Kiro/conversations.db (125.6 MB)
ğŸ“ é…ç½®æ–‡ä»¶: /Users/user/Library/Application Support/Kiro/config.json (2.1 KB)
ğŸ—‚ï¸ ç¼“å­˜ç›®å½•: /Users/user/Library/Application Support/Kiro/cache/ (89.3 MB)
ğŸ“ æ—¥å¿—ç›®å½•: /Users/user/Library/Application Support/Kiro/logs/ (15.7 MB)
ğŸ—‘ï¸ ä¸´æ—¶ç›®å½•: /Users/user/Library/Application Support/Kiro/temp/ (3.2 MB)

æ€»è®¡å­˜å‚¨ä½¿ç”¨: 235.9 MB
æ‰«æå®Œæˆ! æ‰¾åˆ° 1,247 ä¸ªå¯æ¸…ç†é¡¹ç›® (é¢„è®¡èŠ‚çœ: 67.8 MB)

# 2. é¢„è§ˆæ¸…ç†æ“ä½œ
$ ./kiro-cleaner preview
ğŸ§¹ æ¸…ç†é¢„è§ˆ (é¢„è®¡èŠ‚çœ 67.8 MB):

1. ä¸´æ—¶æ–‡ä»¶ (3.2 MB)
   - temp_session_*.tmp (1.5 MB)
   - download_cache/* (1.7 MB)

2. æ—§æ—¥å¿—æ–‡ä»¶ (15.7 MB)
   - app_2024-01-*.log (12.3 MB)
   - error_2024-01-*.log (3.4 MB)

3. è¿‡æœŸç¼“å­˜ (45.2 MB)
   - model_cache_v1/* (28.9 MB)
   - response_cache/expired/* (16.3 MB)

4. æ—§å¯¹è¯è®°å½• (3.7 MB)
   - 15ä¸ªå¯¹è¯è®°å½• (æœ€åæ´»åŠ¨: 30+å¤©å‰)

æ˜¯å¦ç»§ç»­æ¸…ç†? (y/N): y

# 3. æ‰§è¡Œæ¸…ç†
$ ./kiro-cleaner clean --backup
ğŸ§¹ å¼€å§‹æ¸…ç†...
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100% (1,247/1,247)

âœ… æ¸…ç†å®Œæˆ!
ğŸ“Š æ¸…ç†ç»“æœ:
   - åˆ é™¤äº† 892 ä¸ªä¸´æ—¶æ–‡ä»¶ (3.2 MB)
   - æ¸…ç†äº† 23 ä¸ªæ—§æ—¥å¿—æ–‡ä»¶ (15.7 MB)
   - åˆ é™¤äº† 315 ä¸ªè¿‡æœŸç¼“å­˜æ–‡ä»¶ (45.2 MB)
   - ç§»é™¤äº† 15 ä¸ªæ—§å¯¹è¯è®°å½• (3.7 MB)

ğŸ’¾ æ€»è®¡èŠ‚çœ: 67.8 MB
ğŸ’¾ å¤‡ä»½åˆ›å»ºäº: /Users/user/kiro-cleaner-backups/backup_20241201_143022.zip
```

### ç¤ºä¾‹2ï¼šå¤‡ä»½ç®¡ç†

```bash
# åˆ—å‡ºå¤‡ä»½
$ ./kiro-cleaner backup list
ğŸ’¾ å¯ç”¨å¤‡ä»½:

1. backup_20241201_143022.zip (67.8 MB) - 2024-12-01 14:30:22
2. backup_20241130_093045.zip (125.3 MB) - 2024-11-30 09:30:45
3. backup_20241129_160712.zip (89.1 MB) - 2024-11-29 16:07:12

# æ¢å¤å¤‡ä»½
$ ./kiro-cleaner backup restore backup_20241201_143022
ğŸ”„ å¼€å§‹æ¢å¤å¤‡ä»½...
âœ… å¤‡ä»½æ¢å¤å®Œæˆ: 1,247 ä¸ªé¡¹ç›®å·²æ¢å¤
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ‰¾ä¸åˆ°Kiroæ•°æ®

```bash
$ ./kiro-cleaner scan
âŒ é”™è¯¯: æœªæ‰¾åˆ°Kiroæ•°æ®å­˜å‚¨è·¯å¾„

è§£å†³æ–¹æ¡ˆ:
- ç¡®è®¤Kiroå·²æ­£ç¡®å®‰è£…å¹¶è¿è¡Œè¿‡
- æ£€æŸ¥Kiroçš„æ•°æ®å­˜å‚¨è·¯å¾„æ˜¯å¦æ­£ç¡®
- ä½¿ç”¨ --config å‚æ•°æŒ‡å®šè‡ªå®šä¹‰è·¯å¾„
```

#### 2. æƒé™ä¸è¶³

```bash
$ ./kiro-cleaner clean
âŒ é”™è¯¯: æƒé™ä¸è¶³ï¼Œæ— æ³•è®¿é—®æ–‡ä»¶

è§£å†³æ–¹æ¡ˆ:
- ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œ
- æ£€æŸ¥æ–‡ä»¶æƒé™è®¾ç½®
- ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´
```

#### 3. å¤‡ä»½å¤±è´¥

```bash
$ ./kiro-cleaner clean --backup
âš ï¸  è­¦å‘Š: åˆ›å»ºå¤‡ä»½å¤±è´¥: ç£ç›˜ç©ºé—´ä¸è¶³

è§£å†³æ–¹æ¡ˆ:
- é‡Šæ”¾æ›´å¤šç£ç›˜ç©ºé—´
- ç¦ç”¨å¤‡ä»½åŠŸèƒ½: ./kiro-cleaner clean --no-backup
- æŒ‡å®šå¤‡ä»½è·¯å¾„: --backup-path /path/to/large/disk
```

### æ—¥å¿—å’Œè°ƒè¯•

```bash
# å¯ç”¨è¯¦ç»†è¾“å‡º
./kiro-cleaner --verbose scan

# æŸ¥çœ‹æ„å»ºä¿¡æ¯
./kiro-cleaner version

# ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š
./kiro-cleaner --verbose --output json scan > diagnostic.json
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

### å¼€å‘æŒ‡å—

- éµå¾ªGoä»£ç è§„èŒƒ
- æ·»åŠ é€‚å½“çš„æµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£
- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ Apache 2.0 è®¸å¯è¯ã€‚è¯¦æƒ…è¯·è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

## ğŸ“ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤) éƒ¨åˆ†
2. æœç´¢å·²æœ‰çš„ [Issues](https://github.com/vibe-coding-labs/kiro-cleaner/issues)
3. åˆ›å»ºæ–°çš„ [Issue](https://github.com/vibe-coding-labs/kiro-cleaner/issues/new)
4. å‚ä¸ [Discussions](https://github.com/vibe-coding-labs/kiro-cleaner/discussions)

---

**å…è´£å£°æ˜**: æœ¬å·¥å…·ä¼šä¿®æ”¹æˆ–åˆ é™¤æ–‡ä»¶ã€‚ä½¿ç”¨å‰è¯·åŠ¡å¿…å¤‡ä»½é‡è¦æ•°æ®ã€‚ä½œè€…ä¸å¯¹ä»»ä½•æ•°æ®ä¸¢å¤±æ‰¿æ‹…è´£ä»»ã€‚
